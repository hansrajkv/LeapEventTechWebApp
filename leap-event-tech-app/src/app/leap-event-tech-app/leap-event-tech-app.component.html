<div class="page-header">
  <h2>Upcoming Events</h2>
  <button class="btn-primary" [routerLink]="['/sales-summary']">Go to Sales Summary</button>
</div>

<div class="button-group">
  <button class="btn-primary" (click)="fetch(30)">Next 30 days</button>
  <button class="btn-primary" (click)="fetch(60)">Next 60 days</button>
  <button class="btn-primary" (click)="fetch(180)">Next 180 days</button>
</div>

<div *ngIf="loading">Loading…</div>
<div *ngIf="error" class="error-panel">{{ error }}</div>

<table *ngIf="!loading && !error" class="styled-table">
  <thead>
    <tr>
      <th (click)="sortData('name')">Name 
        <span>
          {{ currentSort==='name' ? (sortDirection ? '▲' : '▼') : '↕' }}
        </span>
      </th>
      <th (click)="sortData('startsOn')">Start Date
        <span>
          {{ currentSort==='startsOn' ? (sortDirection ? '▲' : '▼') : '↕' }}
        </span>
      </th>
      <th>End Date</th>
      <th>Location</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let e of events">
      <td>{{ e.name }}</td>
      <td>{{ e.startsOn | date:'medium' }}</td>
      <td>{{ e.endsOn | date:'medium' }}</td>
      <td>{{ e.location }}</td>
    </tr>
  </tbody>
</table>
